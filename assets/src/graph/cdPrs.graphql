fragment PrAutomation on PrAutomation {
  id
  name
  documentation
}

fragment PullRequest on PullRequest {
  id
  service {
    id
    name
  }
  cluster {
    id
    name
    handle
    self
    protect
    deletedAt
    version
    currentVersion
  }
  title
  url
  labels
  insertedAt
  updatedAt
}

mutation CreatePullRequest($id: ID!, $branch: String!, $context: Json!) {
  createPullRequest(id: $id, branch: $branch, context: $context) {
    ...PullRequest
  }
}

query PullRequests(
  $first: Int = 100
  $after: String
  $clusterId: ID
  $serviceId: ID
) {
  pullRequests(
    first: $first
    after: $after
    clusterId: $clusterId
    serviceId: $serviceId
  ) {
    pageInfo {
      ...PageInfo
    }
    edges {
      node {
        ...PullRequest
      }
    }
  }
}
