fragment PrAutomation on PrAutomation {
  id
  name
  documentation
  addon
  cluster {
    ...ClusterBasic
  }
  service {
    id
    name
  }
  repository {
    url
    # Probably don't need, but let's see what's inside
    httpsPath
  }
  role
  documentation
}

fragment PullRequest on PullRequest {
  id
  service {
    id
    name
  }
  cluster {
    ...ClusterBasic
  }
  title
  url
  labels
  insertedAt
  updatedAt
}

mutation CreatePullRequest($id: ID!, $branch: String!, $context: Json!) {
  createPullRequest(id: $id, branch: $branch, context: $context) {
    ...PullRequest
  }
}

query PullRequests(
  $q: String
  $first: Int = 100
  $after: String
  $clusterId: ID
  $serviceId: ID
) {
  pullRequests(
    q: $q
    first: $first
    after: $after
    clusterId: $clusterId
    serviceId: $serviceId
  ) {
    pageInfo {
      ...PageInfo
    }
    edges {
      node {
        ...PullRequest
      }
    }
  }
}

query PrAutomations($first: Int = 100, $after: String) {
  prAutomations(first: $first, after: $after) {
    pageInfo {
      ...PageInfo
    }
    edges {
      node {
        ...PrAutomation
      }
    }
  }
}

mutation CreatePrAutomation($attributes: PrAutomationAttributes!) {
  createPrAutomation(attributes: $attributes) {
    ...PrAutomation
  }
}

mutation UpdatePrAutomation($id: ID!, $attributes: PrAutomationAttributes!) {
  updatePrAutomation(id: $id, attributes: $attributes) {
    ...PrAutomation
  }
}

mutation DeletePrAutomation($id: ID!) {
  deletePrAutomation(id: $id) {
    ...PrAutomation
  }
}
