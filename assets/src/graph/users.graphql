fragment User on User {
  id
  pluralId
  name
  email
  emailSettings {
    digest
  }
  profile
  backgroundColor
  readTimestamp
  roles {
    admin
  }
  personas {
    ...Persona
  }
}

fragment UserTiny on User {
  name
  email
  profile
}

fragment Invite on Invite {
  secureId
}

fragment RoleBinding on RoleBinding {
  id
  user {
    ...User
  }
  group {
    ...Group
  }
}

fragment Role on Role {
  id
  name
  description
  repositories
  permissions
  roleBindings {
    ...RoleBinding
  }
}

fragment AvailableFeatures on AvailableFeatures {
  audits
  cd
  databaseManagement
  userManagement
}

fragment Manifest on PluralManifest {
  network {
    pluralDns
    subdomain
  }
  cluster
  bucketPrefix
}

query Users($q: String, $after: String) {
  users(q: $q, first: 20, after: $after) {
    pageInfo {
      ...PageInfo
    }
    edges {
      node {
        ...User
      }
    }
  }
}

query SearchUsers($q: String, $cursor: String) {
  users(q: $q, after: $cursor, first: 5) {
    pageInfo {
      ...PageInfo
    }
    edges {
      node {
        ...User
      }
    }
  }
}

mutation UpdateUser($id: ID, $attributes: UserAttributes!) {
  updateUser(id: $id, attributes: $attributes) {
    ...User
  }
}

mutation DeleteUser($id: ID!) {
  deleteUser(id: $id) {
    ...User
  }
}

mutation CreateInvite($attributes: InviteAttributes!) {
  createInvite(attributes: $attributes) {
    ...Invite
  }
}
