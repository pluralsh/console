fragment GlobalService on GlobalService {
  id
  distro
  name
  project {
    name
  }
  cascade {
    delete
    detach
  }
  provider {
    id
    name
    cloud
    namespace
  }
  reparent
  service {
    id
    name
  }
  tags {
    name
    value
  }
  insertedAt
  updatedAt
}

mutation CreateGlobalService(
  $attributes: GlobalServiceAttributes!
  $cluster: String
  $name: String
  $serviceId: ID
) {
  createGlobalService(
    attributes: $attributes
    cluster: $cluster
    name: $name
    serviceId: $serviceId
  ) {
    ...GlobalService
  }
}

mutation DeleteGlobalService($id: ID!) {
  deleteGlobalService(id: $id) {
    id
  }
}

query GlobalServices($first: Int, $after: String, $projectId: ID) {
  globalServices(first: $first, after: $after, projectId: $projectId) {
    pageInfo {
      ...PageInfo
    }
    edges {
      node {
        ...GlobalService
      }
    }
  }
}

query GetGlobalService($serviceId: ID!) {
  globalService(id: $serviceId) {
    ...GlobalService
  }
}

query GetGlobalServiceServices($serviceId: ID!, $first: Int, $after: String) {
  globalService(id: $serviceId) {
    services(first: $first, after: $after) {
      pageInfo {
        ...PageInfo
      }
      edges {
        node {
          ...ServiceDeploymentsRow
        }
      }
    }
  }
}

mutation SyncGlobalService($id: ID!) {
  syncGlobalService(id: $id) {
    ...GlobalService
  }
}
