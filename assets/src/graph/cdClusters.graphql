fragment NodePool on NodePool {
  id
  name
}

fragment ClustersRow on Cluster {
  apiDeprecations {
    availableIn
    blocking
    component {
      group
      kind
      name
      service {
        git {
          ref
          folder
        }
        repository {
          httpsPath
          urlFormat
        }
      }
    }
    deprecatedIn
    removedIn
    replacement
  }
  currentVersion
  id
  name
  nodePools {
    ...NodePool
  }
  pingedAt
  provider {
    id
    cloud
    name
    namespace
  }
  self
  service {
    repository {
      url
    }
  }
  version
}

query Clusters {
  clusters(first: 100) {
    pageInfo {
      ...PageInfo
    }
    edges {
      node {
        ...ClustersRow
      }
    }
  }
}

query ClustersTiny {
  clusters(first: 100) {
    edges {
      node {
        id
        name
      }
    }
  }
}

query Cluster($id: ID!) {
  cluster(id: $id) {
    ...ClustersRow
  }
}

mutation UpdateCluster($id: ID!, $attributes: ClusterUpdateAttributes!) {
  updateCluster(id: $id, attributes: $attributes) {
    ...ClustersRow
  }
}
