# Azure configuration:
# - provider            - s3-proxy provider name, "azureblob".
# - internalIdentity    - internal s3-proxy AWS access key ID to use.
# - internalCredential  - internal s3-proxy AWS secret access key to use.
# - identity            - Azure service principal client ID.
# - credential          - Azure service principal client secret.
# - bucket              - Azure blob container name.

velero:
  credentials:
    secretContents:
      cloud: |
        [default]
        aws_access_key_id={{ configuration.internalIdentity }}
        aws_secret_access_key={{ configuration.internalCredential }}

s3-proxy:
  s3:
    identity: {{ configuration.internalIdentity }}
    credential: {{ configuration.internalCredential }}
  target:
    provider: {{ configuration.provider }}
    endpoint: "https://{{ configuration.bucket }}.blob.core.windows.net"
    identity: {{ configuration.identity }}
    credential: {{ configuration.credential }}