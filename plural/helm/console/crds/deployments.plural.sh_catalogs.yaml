---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.19.0
  name: catalogs.deployments.plural.sh
spec:
  group: deployments.plural.sh
  names:
    kind: Catalog
    listKind: CatalogList
    plural: catalogs
    singular: catalog
  scope: Cluster
  versions:
  - additionalPrinterColumns:
    - description: ID of the Catalog in the Console API.
      jsonPath: .status.id
      name: ID
      type: string
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: |-
          Catalog is an organized collection of PR Automations.
          It enables teams to group related automation workflows by category (like "data", "security",
          "devops") and provides a browsable interface for self-service capabilities. Catalogs support
          hierarchical permissions through RBAC bindings and can be scoped to specific projects for
          multi-tenant environments.
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: CatalogSpec defines the desired state of Catalog
            properties:
              author:
                description: |-
                  Author is the name of the catalog creator used for attribution and contact purposes.
                  This field helps users identify who maintains and supports the catalog contents.
                type: string
              bindings:
                description: |-
                  Bindings define the read, write, and create permissions for this catalog.
                  Controls who can view, modify, and use the PR automations within this catalog.
                  Bindings contain read and write policies of this Catalog.
                properties:
                  create:
                    description: |-
                      Create bindings control who can generate new PR automations using this catalog.
                      Users with create permissions can trigger self-service workflows but cannot modify the catalog itself.
                    items:
                      description: Binding used to assign permissions to a resource
                        for a user or a group in the system.
                      properties:
                        UserID:
                          type: string
                        groupID:
                          type: string
                        groupName:
                          type: string
                        id:
                          type: string
                        userEmail:
                          type: string
                      type: object
                    type: array
                  read:
                    description: |-
                      Read bindings control who can view and browse this catalog and its PR automations.
                      Users with read permissions can see available automations but cannot execute or modify them.
                    items:
                      description: Binding used to assign permissions to a resource
                        for a user or a group in the system.
                      properties:
                        UserID:
                          type: string
                        groupID:
                          type: string
                        groupName:
                          type: string
                        id:
                          type: string
                        userEmail:
                          type: string
                      type: object
                    type: array
                  write:
                    description: |-
                      Write bindings control who can modify the catalog and its PR automations.
                      Users with write permissions can add, update, or remove PR automations within this catalog.
                    items:
                      description: Binding used to assign permissions to a resource
                        for a user or a group in the system.
                      properties:
                        UserID:
                          type: string
                        groupID:
                          type: string
                        groupName:
                          type: string
                        id:
                          type: string
                        userEmail:
                          type: string
                      type: object
                    type: array
                type: object
              category:
                description: |-
                  Category is a short classification label for organizing catalogs in the browser.
                  Examples include "infrastructure", "security", "monitoring", or "development".
                type: string
              darkIcon:
                description: |-
                  DarkIcon is a URL to a dark mode variant of the catalog icon.
                  Used when the UI is in dark mode to ensure proper contrast and visibility.
                type: string
              description:
                description: |-
                  Description provides a detailed explanation of the catalog's purpose and contents.
                  This helps users understand what types of automations they can find within.
                example: my catalog description
                type: string
              icon:
                description: |-
                  Icon is a URL to an icon image for visual identification in the catalog browser.
                  Should be a publicly accessible image URL that displays well at small sizes.
                type: string
              name:
                description: |-
                  Name is the display name for this catalog if different from metadata.name.
                  Defaults to metadata.name if not specified.
                type: string
              projectRef:
                description: |-
                  ProjectRef links this catalog to a specific project for permission inheritance.
                  When set, the catalog inherits the project's RBAC policies and is scoped to that project.
                  ProjectRef owning project of the catalog, permissions will propagate down
                properties:
                  apiVersion:
                    description: API version of the referent.
                    type: string
                  fieldPath:
                    description: |-
                      If referring to a piece of an object instead of an entire object, this string
                      should contain a valid JSON/Go field access statement, such as desiredState.manifest.containers[2].
                      For example, if the object reference is to a container within a pod, this would take on a value like:
                      "spec.containers{name}" (where "name" refers to the name of the container that triggered
                      the event) or if no container name is specified "spec.containers[2]" (container with
                      index 2 in this pod). This syntax is chosen only to have some well-defined way of
                      referencing a part of an object.
                    type: string
                  kind:
                    description: |-
                      Kind of the referent.
                      More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
                    type: string
                  name:
                    description: |-
                      Name of the referent.
                      More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                    type: string
                  namespace:
                    description: |-
                      Namespace of the referent.
                      More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/
                    type: string
                  resourceVersion:
                    description: |-
                      Specific resourceVersion to which this reference is made, if any.
                      More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#concurrency-control-and-consistency
                    type: string
                  uid:
                    description: |-
                      UID of the referent.
                      More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#uids
                    type: string
                type: object
                x-kubernetes-map-type: atomic
              reconciliation:
                description: |-
                  Reconciliation settings for this resource.
                  Controls drift detection and reconciliation intervals.
                properties:
                  driftDetection:
                    default: true
                    description: |-
                      DriftDetection enables drift detection for this resource.
                      It is destined to detect changes made to the related
                      resources that are not referenced with owner ref.
                      Use with Interval to set how often drift detection runs.
                    example: false
                    type: boolean
                  interval:
                    default: 30m
                    description: Interval for DriftDetection mechanism.
                    example: 5m30s
                    type: string
                type: object
              tags:
                additionalProperties:
                  type: string
                description: |-
                  Tags provide key-value metadata for filtering and organizing catalogs.
                  Useful for adding custom labels like environment, team, or technology stack.
                type: object
            required:
            - author
            type: object
          status:
            properties:
              conditions:
                description: Represents the observations of a PrAutomation's current
                  state.
                items:
                  description: Condition contains details for one aspect of the current
                    state of this API Resource.
                  properties:
                    lastTransitionTime:
                      description: |-
                        lastTransitionTime is the last time the condition transitioned from one status to another.
                        This should be when the underlying condition changed.  If that is not known, then using the time when the API field changed is acceptable.
                      format: date-time
                      type: string
                    message:
                      description: |-
                        message is a human readable message indicating details about the transition.
                        This may be an empty string.
                      maxLength: 32768
                      type: string
                    observedGeneration:
                      description: |-
                        observedGeneration represents the .metadata.generation that the condition was set based upon.
                        For instance, if .metadata.generation is currently 12, but the .status.conditions[x].observedGeneration is 9, the condition is out of date
                        with respect to the current state of the instance.
                      format: int64
                      minimum: 0
                      type: integer
                    reason:
                      description: |-
                        reason contains a programmatic identifier indicating the reason for the condition's last transition.
                        Producers of specific condition types may define expected values and meanings for this field,
                        and whether the values are considered a guaranteed API.
                        The value should be a CamelCase string.
                        This field may not be empty.
                      maxLength: 1024
                      minLength: 1
                      pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                      type: string
                    status:
                      description: status of the condition, one of True, False, Unknown.
                      enum:
                      - "True"
                      - "False"
                      - Unknown
                      type: string
                    type:
                      description: type of condition in CamelCase or in foo.example.com/CamelCase.
                      maxLength: 316
                      pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                type: array
                x-kubernetes-list-map-keys:
                - type
                x-kubernetes-list-type: map
              id:
                description: ID of the resource in the Console API.
                type: string
              sha:
                description: SHA of last applied configuration.
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
