icon: https://d3g9o9u8re44ak.cloudfront.net/logo/55cad6f2-84cb-49a7-9d60-265f7e4ea91e/8a67fa7b-85bd-44e4-823c-d7d5690777b1.png
git_url: https://github.com/aws/karpenter-provider-aws
release_url: https://github.com/aws/karpenter-provider-aws/releases/tag/v{vsn}
helm_repository_url: oci://public.ecr.aws/karpenter/karpenter
helm_values: settings.clusterName=example
versions:
- version: 1.8.0
  kube: ['1.34', '1.33', '1.32', '1.31', '1.30', '1.29', '1.28']
  requirements: []
  incompatibilities: []
  summary:
    helm_changes: ''
    chart_updates: ["Helm chart updated to reflect new CLI options (noted in v1.8.0\
        \ chores: \u201CUpdate helm chart for new CLI options\u201D)."]
    features: ['Delayed registration support for AWS KWOK (v1.6.0), improving KWOK-based
        testing/virtual node flows.', Capacity Block support (v1.6.0) for provisioning
        into EC2 Capacity Blocks., 'Temporarily ICE an AZ when its subnets run out
        of IPs (v1.6.0), reducing thrash when IP capacity is exhausted.', Additional
        Bottlerocket log settings support (v1.6.0)., Auto-relaxing minimum values
        support (v1.6.0) to reduce configuration friction around minimum constraints.,
      'Ability to set `spec.IpPrefixCount` to pre-warm IP prefixes (v1.8.0), helping
        reduce pod IP allocation latency on new nodes.', 'Support `InstanceMatchCriteria`
        in `CapacityReservationSelectorTerms` (v1.8.0), improving targeting of Capacity
        Reservations.', 'Bottlerocket change: use default ephemeral storage bind command
        (v1.8.0).']
    breaking_changes: []
  chart_version: 1.8.0
  images: ['public.ecr.aws/karpenter/controller:1.8.0@sha256:f913075cdd31cfcdfaa9726ca7a0b264832fc42e8a48eb573a2a0f454b38b112']
- version: 1.6.0
  kube: ['1.34', '1.33', '1.32', '1.31', '1.30', '1.29']
  requirements: []
  incompatibilities: []
  summary:
    helm_changes: "## Helm/values changes to check before upgrading\n- **`settings.clusterName`\
      \ is now required**: the chart will **fail to install/upgrade** if this value\
      \ is not set. Ensure your `values.yaml` (or `--set`) includes it.\n- **ServiceMonitor\
      \ enhancements**: if you use the chart\u2019s `ServiceMonitor`, you can now\
      \ configure **`relabelings`** and **`metricRelabelings`**. No change required\
      \ unless you want to use these new fields.\n- **Default security context updated**:\
      \ the chart improved the **default pod/container security context**. If you\
      \ have strict Pod Security Admission / PSP-style policies, verify the rendered\
      \ manifests still comply with your cluster\u2019s requirements.\n- **runAsNonRoot\
      \ removed in chart**: the chart **removed `runAsNonRoot`** to support more restricted\
      \ pod security profiles. If you relied on `runAsNonRoot: true`, you may need\
      \ to explicitly set your own security context via values.\n"
    chart_updates: [Improved default security context in the Helm chart., Chart now
        validates configuration and fails installation if `settings.clusterName` is
        missing., ServiceMonitor template extended to support `relabelings` and `metricRelabelings`.,
      Chart securityContext defaults adjusted (including removal of `runAsNonRoot`).]
    features: ['Support for AWS KWOK, including delayed registration support for simulated
        nodes.', Capacity Block support (useful for reserving/using pre-purchased
        EC2 capacity blocks)., "Automatically \u201CICE\u201D (temporarily exclude)\
        \ AZs when subnets in that AZ run out of available IPs, improving resilience\
        \ during IP exhaustion events.", 'Additional Bottlerocket configuration options,
        including more log settings and soft eviction support.', '`volumeInitializationRate`
        support for EBS `blockDeviceMappings`, allowing control of EBS initialization
        performance.', "Support for automatically relaxing minimum values in certain\
        \ scheduling/validation paths (reduces unnecessary failures when strict mins\
        \ can\u2019t be met)."]
    breaking_changes: [Kubernetes **1.25 support is dropped**. Clusters on 1.25 must
        upgrade Kubernetes before upgrading Karpenter provider to v1.6.0., Helm chart
        now **requires `settings.clusterName`**; upgrades/installs will fail if it
        is not provided.]
  chart_version: 1.6.0
  images: ['public.ecr.aws/karpenter/controller:1.6.0@sha256:37c761a3a0b485fd34db1390317ef6149141f532c5a699c528b98fb8f9cc722a']
- version: 1.5.0
  kube: ['1.33', '1.32', '1.31', '1.30', '1.29']
  requirements: []
  incompatibilities: []
  summary:
    helm_changes: '- **Helm install now requires `settings.clusterName`:** the chart
      will fail to install/upgrade if `settings.clusterName` is not set. Ensure your
      `values.yaml` (or `--set`) includes it.

      - **ServiceMonitor enhancements (if you use Prometheus Operator):** the chart
      added support for `relabeling` and `metricRelabeling` on the ServiceMonitor.
      No action required unless you want to use these fields.

      - **Default security context changed:** chart defaults were tightened/improved.
      If you previously relied on running as root or looser permissions, verify pod
      security settings/PSA/PSP compatibility and override `securityContext`/`podSecurityContext`
      only if needed.'
    chart_updates: [Improved/tightened default controller pod security context., Chart
        validates presence of `settings.clusterName` and fails installation if missing.,
      ServiceMonitor template updated to support `relabelings` and `metricRelabelings`
        fields (Prometheus Operator users).]
    features: [Stricter/safer Helm chart defaults (security context) and better chart
        validation (requires `settings.clusterName`)., 'Bottlerocket support improvements:
        soft eviction support and a new `single-process-oom-kill` setting, plus additional
        kubelet configuration test coverage.', 'New NodeClass storage option: `volumeInitializationRate`
        on EBS `blockDeviceMappings`, enabling more control over EBS volume initialization
        performance.']
    breaking_changes: [Kubernetes 1.25 support was dropped; clusters running 1.25
        must be upgraded before moving to these versions., Helm chart installation/upgrade
        can fail if `settings.clusterName` is not set; this is an intentional enforcement
        change.]
  chart_version: 1.5.0
  images: ['public.ecr.aws/karpenter/controller:1.5.0@sha256:339aef3f5ecdf6f94d1c7cc9d0e1d359c281b4f9b842877bdbf2acd3fa360521']
- version: 1.2.0
  kube: ['1.32', '1.31', '1.30', '1.29']
  requirements: []
  incompatibilities: []
  summary:
    helm_changes: ''
    chart_updates: []
    features: [Supports IAM role paths (useful if your org creates roles like /team/role-name
        instead of flat names)., CRDs can now be installed with optional custom annotations.,
      Adds support for a Node Monitoring Agent feature area (node health/repair related
        integrations).]
    breaking_changes: []
  chart_version: 1.2.0
  images: ['public.ecr.aws/karpenter/controller:1.2.0@sha256:24b8fe57f02b70fc4ab3cd6d5aa0d73a6f3d0c62ca5d23d7ffc8853eac01e324']
- version: 1.0.5
  kube: ['1.31', '1.30', '1.29']
  requirements: []
  incompatibilities: []
  summary:
    helm_changes: ''
    chart_updates: ['v0.37.0 introduces a readiness condition on the EC2NodeClass,
        requiring a CRD upgrade; follow the upstream upgrade guide.', 'v1.0.5 is a
        patch release primarily with a bug fix: migration controllers are enabled
        when webhooks are enabled.']
    features: ['v0.37.0: Ability to select instances by EBS Maximum Bandwidth.', 'v0.37.0:
        Adds nodepool label to the karpenter_interruption_actions_performed metric.',
      'v0.37.0: Adds extra fields to the Bottlerocket Kubernetes configuration.']
    breaking_changes: ['v0.37.0: EC2NodeClass gains a readiness condition, which requires
        upgrading CRDs as part of the upgrade.']
  chart_version: 1.0.5
  images: ['public.ecr.aws/karpenter/controller:1.0.5@sha256:f2df98735b232b143d37f0c6819a6cae2be4740e3c8b38297bceb365cf3f668b']
- version: 0.37.0
  kube: ['1.30', '1.29']
  requirements: []
  incompatibilities: []
  summary:
    helm_changes: "## Helm / chart-related notes (what to watch during the upgrade)\n\
      \n- **CRD upgrade required (v0.37.0)**: v0.37.0 explicitly notes it **adds a\
      \ readiness condition to `EC2NodeClass`**, which means the **`EC2NodeClass`\
      \ CRD changes** and you must ensure CRDs are upgraded before/with the controller.\n\
      \  - In practice: apply the new CRDs first (or use the chart\u2019s CRD mechanism\
      \ if you manage them that way), then upgrade the Helm release.\n- **ServiceMonitor\
      \ template fix (v0.37.0)**: a chart bug fix corrects **ServiceMonitor indentation**.\
      \ If you use Prometheus Operator/ServiceMonitors, re-check that the rendered\
      \ YAML is valid and that metrics scraping works post-upgrade.\n- **Avoid duplicated\
      \ \u201CAH\u201D config (v0.37.0)**: chart bug fix notes an update to avoid\
      \ duplicating **AH config** (exact setting name not shown in your snippet).\
      \ If you\u2019ve set related values, compare rendered manifests before/after.\n\
      - **Helm generation bugs existed earlier (v0.34.0)**: v0.34.0 includes fixes\
      \ where Helm chart generation didn\u2019t run correctly for v0.33.0. This is\
      \ mainly historical, but it\u2019s a reminder to rely on the **version-matched\
      \ chart** for your target controller.\n\n> You didn\u2019t include the intermediate\
      \ v0.35.x/v0.36.x Helm changelog text, so double-check Helm values diffs for\
      \ those versions as well when you run the upgrade."
    chart_updates: ['v0.37.0: Adds a readiness condition to `EC2NodeClass` (CRD update
        required).', 'v0.37.0: Chart bug fix for ServiceMonitor indentation (Prometheus
        Operator users should validate rendered manifests).', 'v0.37.0: Chart change
        to avoid duplicating AH config in the rendered release (verify related values/templating
        in your environment).', 'v0.34.0: Release includes fixes related to Helm chart
        generation issues present in v0.33.0 (mostly historical but emphasizes using
        the correct chart/version).']
    features: ['`build_info` Prometheus metric added (version/sha/golang_version labels)
        to help with observability and troubleshooting.', Support for mounted instance-store
        ephemeral storage (useful for workloads needing local ephemeral disks)., Ability
        to select instance types by **EBS maximum bandwidth** (more precise performance-based
        scheduling)., Interruption action metric now includes a **nodepool label**
        (better attribution of interruption handling)., Additional Bottlerocket Kubernetes
        configuration fields supported (more flexibility for Bottlerocket nodes).]
    breaking_changes: [v0.37.0 requires a **CRD upgrade** because `EC2NodeClass` gains
        a **readiness condition**; upgrading the controller without updating CRDs
        can break reconciliation or leave resources in an unexpected state., 'Release
        notes mention a **BREAKING CHANGE: Refactor NodeClass controller** (internal
        behavior around NodeClass reconciliation may change; validate NodeClass/NodePool
        lifecycle in a staging cluster and watch logs/events after upgrade).']
  chart_version: 0.37.0
  images: ['public.ecr.aws/karpenter/controller:0.37.0@sha256:157f478f5db1fe999f5e2d27badcc742bf51cc470508b3cebe78224d0947674f']
- version: 0.34.0
  kube: ['1.29']
  requirements: []
  incompatibilities: []
  summary:
    helm_changes: ''
    chart_updates: ['Introduced container-level default `securityContext` (previously
        pod-level), which is a potential breaking change for how the controller pod
        runs/PSA compliance is handled.', Helm chart generation fixes were made after
        v0.33.0 (chart packaging/build pipeline reliability improvements)., 'RBAC
        tightened: removed `create node` permission from the controller ClusterRole;
        additional scoping around launch template access and list calls tagged with
        `EC2NodeClass`.']
    features: [Mounted instance-store (ephemeral) storage is now supported for nodes
        that have instance-store volumes., 'A new `build_info` Prometheus metric is
        added that exposes version, git SHA, and Go version labels for easier observability
        and debugging.']
    breaking_changes: ['Default `securityContext` moved from the Pod spec to the container
        spec, which can affect pod security admission/override behavior and may require
        updating custom manifests/Helm values if you were relying on the old placement.']
  chart_version: 0.34.0
  images: []
- version: 0.31.0
  kube: ['1.28']
  requirements: []
  incompatibilities: []
  summary: null
  chart_version: 0.31.0
  images: []
- version: 0.28.0
  kube: ['1.27', '1.26', '1.25', '1.24', '1.23', '1.22', '1.21', '1.20', '1.19']
  requirements: []
  incompatibilities: []
  summary: null
- version: 0.25.0
  kube: ['1.25', '1.24', '1.23', '1.22', '1.21', '1.20', '1.19']
  requirements: []
  incompatibilities: []
  summary: null
